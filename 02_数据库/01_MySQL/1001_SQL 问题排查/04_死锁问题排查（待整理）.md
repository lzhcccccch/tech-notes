









##### 报错信息如下1：

~~~sh
2024-09-12 20:30:18.937 [TID:f9393742171b45ada7a2cd909166f56e.78.17261442171424359] [XNIO-1 task-14] ERROR com.cloud.common.exception.GlobalExceptionHandler - 全局异常捕捉信息处理 :[类名#方法名: OmsProductionOrderDetailController#commitProductOrderDetail] [入参(位置#类型): arg0#OmsProductionOrderDetail; ] [异常信息: org.springframework.dao.DeadlockLoserDataAccessException: 
### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
### The error may involve com.cloud.order.mapper.OmsProductionOrderDetailMapper.updateBatchByPrimaryKeySelective-Inline
### The error occurred while setting parameters
### SQL: UPDATE oms_production_order_detail  set create_by =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when 
。。。省略部分SQL

### Cause: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
; Deadlock found when trying to get lock; try restarting transaction; nested exception is com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:267)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
        at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
        at com.sun.proxy.$Proxy180.update(Unknown Source)
        at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:294)
        at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:63)
        at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
        at com.sun.proxy.$Proxy248.updateBatchByPrimaryKeySelective(Unknown Source)
        at sun.reflect.GeneratedMethodAccessor894.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
        at com.sun.proxy.$Proxy249.updateBatchByPrimaryKeySelective(Unknown Source)
        at com.cloud.order.service.impl.OmsProductionOrderDetailServiceImpl.lambda$commitProductOrderDetail$49(OmsProductionOrderDetailServiceImpl.java:1012)
        at java.util.ArrayList.forEach(ArrayList.java:1259)
        at com.cloud.order.service.impl.OmsProductionOrderDetailServiceImpl.commitProductOrderDetail(OmsProductionOrderDetailServiceImpl.java:1011)
        at com.cloud.order.service.impl.OmsProductionOrderDetailServiceImpl$$FastClassBySpringCGLIB$$92b0835.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:99)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.service.impl.OmsProductionOrderDetailServiceImpl$$EnhancerBySpringCGLIB$$f2c9d5b1.commitProductOrderDetail(<generated>)
        at com.cloud.order.controller.OmsProductionOrderDetailController.commitProductOrderDetail$original$HX1unE6I(OmsProductionOrderDetailController.java:211)
        at com.cloud.order.controller.OmsProductionOrderDetailController.commitProductOrderDetail$original$HX1unE6I$accessor$RXoJumHH(OmsProductionOrderDetailController.java)
        at com.cloud.order.controller.OmsProductionOrderDetailController$auxiliary$XhP7OHyb.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:86)
        at com.cloud.order.controller.OmsProductionOrderDetailController.commitProductOrderDetail(OmsProductionOrderDetailController.java)
        at com.cloud.order.controller.OmsProductionOrderDetailController$$FastClassBySpringCGLIB$$24beab99.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.cloud.common.multidatasource.aspect.DefaultDataSourceAspect.around(DefaultDataSourceAspect.java:126)
        at sun.reflect.GeneratedMethodAccessor387.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.cloud.common.auth.aspect.PreAuthorizeAspect.around(PreAuthorizeAspect.java:45)
        at sun.reflect.GeneratedMethodAccessor404.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:55)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:62)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.controller.OmsProductionOrderDetailController$$EnhancerBySpringCGLIB$$824785b7.commitProductOrderDetail(<generated>)
        at sun.reflect.GeneratedMethodAccessor1765.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:523)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
        at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at com.cloud.order.config.rpc.RpcContextHolderFilter.doFilter(RpcContextHolderFilter.java:50)
        at com.cloud.order.config.rpc.RpcContextHolderFilter$$FastClassBySpringCGLIB$$39cfeadd.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.config.rpc.RpcContextHolderFilter$$EnhancerBySpringCGLIB$$102dd778.doFilter(<generated>)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
        at org.apache.skywalking.apm.plugin.undertow.v2x.SWRunnable.run(SWRunnable.java:45)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:750)
Caused by: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:123)
        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$V6feSrYL(ClientPreparedStatement.java:370)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$V6feSrYL$accessor$ufsNYq56(ClientPreparedStatement.java)
        at com.mysql.cj.jdbc.ClientPreparedStatement$auxiliary$wMF3NSMc.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:86)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java)
        at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
        at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46)
        at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
        at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
        at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
        at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
        at sun.reflect.GeneratedMethodAccessor575.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
        at com.sun.proxy.$Proxy463.update(Unknown Source)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
        at sun.reflect.GeneratedMethodAccessor628.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
        ... 148 more
~~~



##### 查询 MySQL 死锁日志1：

~~~sh
*** (1) TRANSACTION:

TRANSACTION 334315645, ACTIVE 1 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 4 lock struct(s), heap size 1136, 4 row lock(s), undo log entries 3
MySQL thread id 1471312, OS thread handle 140593628800768, query id 435141519 10.206.99.41 appadmin updating
UPDATE oms_production_order_detail  set create_by =case when id=1834185356948746240 then '24007956'                         when id=1834185356964016128 then '240
07956'                         when id=1834185356967165952 then '24007956'                         when id=1834185356978528256 then '24007956'                   
      when id=1834185356982251520 then '24007956'                         when id=1834185357065502720 then '24007956'                         when id=18341853570
67579392 then '24007956'                         when id=1834185357105274880 then '24007956'                         when id=1834185357113720832 then '24007956' 
                        when id=1834185357170552832 then '24007956'                         when id=1834185357188194304 then '24007956'                         w
hen id=1834185357198544896 then '24007956'                         when id=1834185357202477056 then '24007956
2024-09-12T20:30:18.712213+08:00 1471119 [Note] InnoDB: *** (1) WAITING FOR THIS LOCK TO BE GRANTED:

RECORD LOCKS space id 782 page no 5079 n bits 120 index PRIMARY of table `orw_chzh_db`.`oms_production_order_detail` trx id 334315645 lock_mode X locks rec but n
ot gap waiting
Record lock, heap no 42 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 997455dd3eeda000; asc  tU >   ;;
 1: len 6; hex 000013ed405c; asc     @\;;
 2: len 7; hex 7200003a9d2dab; asc r  : - ;;
 3: len 22; hex 524d3234303931323230333030383633323034373232; asc RM24091220300863204722;;
 4: len 14; hex 5043323032343039313232343535; asc PC202409122455;;
 5: len 4; hex 38304730; asc 80G0;;
 6: len 10; hex 30333230343032303438; asc 0320402048;;
 7: len 24; hex 472d434f4e2d332d502d322e352d4c2d332d422d35343539; asc G-CON-3-P-2.5-L-3-B-5459;;
 8: len 10; hex 323032342d30392d3135; asc 2024-09-15;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000076c00000000; asc           l    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3832; asc N82;;
 15: len 4; hex 42303030; asc B000;;
 16: len 1; hex 30; asc 0;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b4593029; asc   Y0);;
 20: len 8; hex 3234303037393536; asc 24007956;;
 21: len 5; hex 99b459478e; asc   YG ;;
 22: SQL NULL;
 23: SQL NULL;
 24: SQL NULL;

2024-09-12T20:30:18.713952+08:00 1471119 [Note] InnoDB: *** (2) TRANSACTION:

TRANSACTION 334315612, ACTIVE 18 sec starting index read, thread declared inside InnoDB 1576
mysql tables in use 1, locked 1
1886 lock struct(s), heap size 188624, 63713 row lock(s), undo log entries 63712
MySQL thread id 1471119, OS thread handle 140593640965888, query id 435141553 10.206.99.41 appadmin updating
update oms_production_order_detail
         set gather_order_code =case when id = 1833864738640900096 then 'RM24091220300865204210'



                        when id = 1833845931776843776 then 'RM24091220300865204211'



                        when id = 1834133895472926720 then 'RM24091220300865204212'



                        when id = 1834073202305847296 then 'RM24091220300865204213'



                        when id = 1834051639065137152 then 'RM24091220300865204214'



                        when id = 1834073202085998592 then 'RM24091220300865204215'




2024-09-12T20:30:18.714022+08:00 1471119 [Note] InnoDB: *** (2) HOLDS THE LOCK(S):

RECORD LOCKS space id 782 page no 5079 n bits 120 index PRIMARY of table `orw_chzh_db`.`oms_production_order_detail` trx id 334315612 lock_mode X locks rec but n
ot gap
Record lock, heap no 2 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 997455dd3d958000; asc  tU =   ;;
 1: len 6; hex 000013ed405c; asc     @\;;
 2: len 7; hex 7200003a660489; asc r  :f  ;;
 3: len 22; hex 524d3234303931323230333030383632323037363630; asc RM24091220300862207660;;
 4: len 14; hex 5043323032343039313232343535; asc PC202409122455;;
 5: len 4; hex 38304730; asc 80G0;;
 6: len 10; hex 30323630393130303033; asc 0260910003;;
 7: len 17; hex 472d524553432d3232344a2d3332313654; asc G-RESC-224J-3216T;;
 8: len 10; hex 323032342d30392d3135; asc 2024-09-15;;
 9: len 15; hex 80000000000000000493e000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000164400000000; asc           D    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 583334; asc X34;;
 15: len 4; hex 41303330; asc A030;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b4593029; asc   Y0);;
 20: len 8; hex 3234303037393536; asc 24007956;;
 21: len 5; hex 99b459478c; asc   YG ;;
 22: len 8; hex 3234303234353032; asc 24024502;;
 23: len 5; hex 99b459375b; asc   Y7[;;
 24: len 8; hex 3234303234353032; asc 24024502;;
~~~









##### 报错信息2：

~~~sh
2024-09-13 18:10:20.924 ERROR 1 --- [  XNIO-1 task-1] c.c.c.exception.GlobalExceptionHandler   : 全局异常捕捉信息处理 :[类名#方法名: OmsRawMaterialGatherController#commitRawMatrialRows] [入参(位置#类型): arg0#List; ] [异常信息: org.springframework.dao.DeadlockLoserDataAccessException: 
### Error updating database.  Cause: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
### The error may involve com.cloud.order.mapper.OmsProductionOrderDetailMapper.updateBatchByPrimaryKeySelective-Inline
### The error occurred while setting parameters
### SQL: UPDATE oms_production_order_detail  set create_by =case when id=? then ?                         when id=? then ?         
。。。省略部分 SQL
WHERE id IN  ( ?, ?, ?, ?, ? )

### Cause: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
; Deadlock found when trying to get lock; try restarting transaction; nested exception is com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:267)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
        at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446)
        at com.sun.proxy.$Proxy180.update(Unknown Source)
        at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:294)
        at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:63)
        at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59)
        at com.sun.proxy.$Proxy248.updateBatchByPrimaryKeySelective(Unknown Source)
        at sun.reflect.GeneratedMethodAccessor640.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:205)
        at com.sun.proxy.$Proxy249.updateBatchByPrimaryKeySelective(Unknown Source)
        at com.cloud.common.core.service.impl.BaseServiceImpl.updateBatchByPrimaryKeySelective(BaseServiceImpl.java:92)
        at com.cloud.common.core.service.impl.BaseServiceImpl$$FastClassBySpringCGLIB$$4442d0e1.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.service.impl.OmsProductionOrderDetailServiceImpl$$EnhancerBySpringCGLIB$$43f06bbe.updateBatchByPrimaryKeySelective(<generated>)
        at com.cloud.order.service.impl.OmsRawMaterialGatherServiceImpl.lambda$updateOrderDetail$5(OmsRawMaterialGatherServiceImpl.java:276)
        at java.util.ArrayList.forEach(ArrayList.java:1259)
        at com.cloud.order.service.impl.OmsRawMaterialGatherServiceImpl.updateOrderDetail(OmsRawMaterialGatherServiceImpl.java:273)
        at com.cloud.order.service.impl.OmsRawMaterialGatherServiceImpl.commitRawMatrialRows(OmsRawMaterialGatherServiceImpl.java:156)
        at com.cloud.order.service.impl.OmsRawMaterialGatherServiceImpl$$FastClassBySpringCGLIB$$833f4f31.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:366)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:99)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.service.impl.OmsRawMaterialGatherServiceImpl$$EnhancerBySpringCGLIB$$73237e32.commitRawMatrialRows(<generated>)
        at com.cloud.order.controller.OmsRawMaterialGatherController.commitRawMatrialRows$original$pH9x8laF(OmsRawMaterialGatherController.java:168)
        at com.cloud.order.controller.OmsRawMaterialGatherController.commitRawMatrialRows$original$pH9x8laF$accessor$ABxJCcrr(OmsRawMaterialGatherController.java)
        at com.cloud.order.controller.OmsRawMaterialGatherController$auxiliary$vGumi3Ye.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:86)
        at com.cloud.order.controller.OmsRawMaterialGatherController.commitRawMatrialRows(OmsRawMaterialGatherController.java)
        at com.cloud.order.controller.OmsRawMaterialGatherController$$FastClassBySpringCGLIB$$a3a5fb9d.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.cloud.common.multidatasource.aspect.DefaultDataSourceAspect.around(DefaultDataSourceAspect.java:126)
        at sun.reflect.GeneratedMethodAccessor388.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:88)
        at com.cloud.common.auth.aspect.PreAuthorizeAspect.around(PreAuthorizeAspect.java:45)
        at sun.reflect.GeneratedMethodAccessor454.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:644)
        at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:633)
        at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.adapter.AfterReturningAdviceInterceptor.invoke(AfterReturningAdviceInterceptor.java:55)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:62)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:175)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:95)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.controller.OmsRawMaterialGatherController$$EnhancerBySpringCGLIB$$6918dbd0.commitRawMatrialRows(<generated>)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:190)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:138)
        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:106)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:879)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:793)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1040)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:943)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
        at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:523)
        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:590)
        at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)
        at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at com.cloud.order.config.rpc.RpcContextHolderFilter.doFilter(RpcContextHolderFilter.java:50)
        at com.cloud.order.config.rpc.RpcContextHolderFilter$$FastClassBySpringCGLIB$$39cfeadd.invoke(<generated>)
        at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:769)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at com.alibaba.druid.support.spring.stat.DruidStatInterceptor.invoke(DruidStatInterceptor.java:70)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
        at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:747)
        at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689)
        at com.cloud.order.config.rpc.RpcContextHolderFilter$$EnhancerBySpringCGLIB$$7e71efe6.doFilter(<generated>)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119)
        at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:61)
        at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)
        at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)
        at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)
        at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)
        at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)
        at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)
        at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:132)
        at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)
        at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)
        at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)
        at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)
        at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:269)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$100(ServletInitialHandler.java:78)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:133)
        at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:130)
        at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)
        at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)
        at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:249)
        at io.undertow.servlet.handlers.ServletInitialHandler.access$000(ServletInitialHandler.java:78)
        at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:99)
        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:376)
        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:830)
        at org.apache.skywalking.apm.plugin.undertow.v2x.SWRunnable.run(SWRunnable.java:45)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
        at java.lang.Thread.run(Thread.java:750)
Caused by: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:123)
        at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
        at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
        at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$a7lT9Q2k(ClientPreparedStatement.java:370)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute$original$a7lT9Q2k$accessor$KBvXoGFf(ClientPreparedStatement.java)
        at com.mysql.cj.jdbc.ClientPreparedStatement$auxiliary$4CrFPKPp.call(Unknown Source)
        at org.apache.skywalking.apm.agent.core.plugin.interceptor.enhance.InstMethodsInter.intercept(InstMethodsInter.java:86)
        at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java)
        at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
        at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46)
        at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
        at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
        at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
        at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
        at sun.reflect.GeneratedMethodAccessor633.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:63)
        at com.sun.proxy.$Proxy463.update(Unknown Source)
        at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198)
        at sun.reflect.GeneratedMethodAccessor634.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433)
        ... 161 more
~~~



##### MySQL 死锁日志2：

~~~sh
2024-09-13 18:10:20 0x7fde81ee4700
*** (1) TRANSACTION:
TRANSACTION 334448900, ACTIVE 1 sec starting index read
mysql tables in use 1, locked 1
LOCK WAIT 4 lock struct(s), heap size 1136, 3 row lock(s), undo log entries 2
MySQL thread id 1478305, OS thread handle 140593594197760, query id 437214215 10.206.99.64 appadmin updating
UPDATE oms_production_order_detail  set create_by =case when id=1834475787912372224 then '20004201'                         when id=1834477400754638848 then '01160034'                         when id=1834509068779126784 then '20004201'                         when id=1834509817795174400 then '20004201'                         when id=1834524515467870208 then '20004201' end,  create_time =case when id=1834475787912372224 then '2024-09-13 14:14:45.0'                         when id=1834477400754638848 then '2024-09-13 14:21:09.0'                         when id=1834509068779126784 then '2024-09-13 16:27:00.0'                         when id=1834509817795174400 then '2024-09-13 16:29:58.0'                         when id=1834524515467870208 then '2024-09-13 17:28:23.0' end,  update_by =case when id=1834475787912372224 then '01465327'                         when id=1834477400754638848 then '01465327'
*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
RECORD LOCKS space id 782 page no 4595 n bits 120 index PRIMARY of table `orw_chzh_db`.`oms_production_order_detail` trx id 334448900 lock_mode X locks rec but not gap waiting
Record lock, heap no 13 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745d00000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a350dee; asc A   5  ;;
 3: len 22; hex 524d3234303931333138313030373734333732303732; asc RM24091318100774372072;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 11; hex 3033323435313032383041; asc 0324510280A;;
 7: len 30; hex 472de794b5e6849f2d434d2d3138322d3530312d31302a31322d35422d42; asc G-      -CM-182-501-10*12-5B-B; (total 35 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3132; asc N12;;
 15: len 4; hex 42303030; asc B000;;
 16: len 1; hex 30; asc 0;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2291; asc   [" ;;
 22: SQL NULL;
 23: SQL NULL;
 24: SQL NULL;

*** (2) TRANSACTION:
TRANSACTION 334448870, ACTIVE 20 sec starting index read, thread declared inside InnoDB 3450
mysql tables in use 1, locked 1
2105 lock struct(s), heap size 205008, 79551 row lock(s), undo log entries 78000
MySQL thread id 1478302, OS thread handle 140593639343872, query id 437214614 10.206.99.64 appadmin Searching rows for update
update oms_production_order_detail
         set gather_order_code =case when id = 1834438662435135488 then 'RM24091318100775376613'



                        when id = 1834447171412074496 then 'RM24091318100775376614'



                        when id = 1833348385411473408 then 'RM24091318100775376615'



                        when id = 1834149773221548032 then 'RM24091318100775376616'



                        when id = 1834204466417332224 then 'RM24091318100775376616'



                        when id = 1834184098593034240 then 'RM24091318100775376618'



*** (2) HOLDS THE LOCK(S):
RECORD LOCKS space id 782 page no 4595 n bits 120 index PRIMARY of table `orw_chzh_db`.`oms_production_order_detail` trx id 334448870 lock_mode X locks rec but not gap
Record lock, heap no 2 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745524000; asc  u|GER@ ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 41000009c52eaf; asc A    . ;;
 3: len 22; hex 524d3234303931333138313030373538333737383033; asc RM24091318100758377803;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234313030333039; asc 0324100309;;
 7: len 18; hex 472d524553432d31303032462d3136303854; asc G-RESC-1002F-1608T;;
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000493e000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 8000000000000000000f3c00000000; asc           <    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 443533; asc D53;;
 15: len 4; hex 41303330; asc A030;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b228e; asc   [" ;;
 22: len 8; hex 3031333138353431; asc 01318541;;
 23: len 5; hex 99b45b0943; asc   [ C;;
 24: len 8; hex 3031333138353431; asc 01318541;;

Record lock, heap no 3 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c474577d000; asc  u|GEw  ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a3d1447; asc A   = G;;
 3: len 22; hex 524d3234303931333138313030373734333732353036; asc RM24091318100774372506;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234323034343134; asc 0324204414;;
 7: len 30; hex 472d43415043432d3130362f3235304b2d323031322d4354343158355254; asc G-CAPCC-106/250K-2012-CT41X5RT; (total 34 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000493e000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 8000000000000000000f3c00000000; asc           <    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3031; asc N01;;
 15: len 4; hex 41303330; asc A030;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2291; asc   [" ;;
 22: len 8; hex 3231303338343839; asc 21038489;;
 23: len 5; hex 99b45b0862; asc   [ b;;
 24: len 8; hex 3231303338343839; asc 21038489;;

Record lock, heap no 5 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745825000; asc  u|GE P ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a450817; asc A   E  ;;
 3: len 22; hex 524d3234303931333138313030373734333733343437; asc RM24091318100774373447;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234323034333130; asc 0324204310;;
 7: len 30; hex 472d43415045482d3536312f3235314d2d433130352d33302a33302d3130; asc G-CAPEH-561/251M-C105-30*30-10; (total 31 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 8000000000000000030d4000000000; asc           @    ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 8000000000000000000a2800000000; asc           (    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3031; asc N01;;
 15: len 4; hex 42303030; asc B000;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2291; asc   [" ;;
 22: len 8; hex 3231303338343839; asc 21038489;;
 23: len 5; hex 99b45b086e; asc   [ n;;
 24: len 8; hex 3231303338343839; asc 21038489;;

Record lock, heap no 6 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c474585b000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 41000009fd1a1e; asc A      ;;
 3: len 22; hex 524d3234303931333138313030373538333734323032; asc RM24091318100758374202;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234343032383634; asc 0324402864;;
 7: len 30; hex 472de4b889e69e81e7aea1e8b4b4e78987e58685e998bb4e3130314d3530; asc G-                     N101M50; (total 59 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 443539; asc D59;;
 15: len 4; hex 41303330; asc A030;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b228f; asc   [" ;;
 22: len 8; hex 3231303636373538; asc 21066758;;
 23: len 5; hex 99b45b1027; asc   [ ';;
 24: len 8; hex 3231303636373538; asc 21066758;;

Record lock, heap no 7 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745883000; asc  u|GE 0 ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a8430b7; asc A    0 ;;
 3: len 22; hex 524d3234303931333138313030373734333731343231; asc RM24091318100774371421;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234323034363832; asc 0324204682;;
 7: len 30; hex 472d43415045482d3130302f3530304d2d423130352d352a31312d35542d; asc G-CAPEH-100/500M-B105-5*11-5T-; (total 32 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3031; asc N01;;
 15: len 4; hex 41303130; asc A010;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2293; asc   [" ;;
 22: len 8; hex 3231303338343839; asc 21038489;;
 23: len 5; hex 99b45b086e; asc   [ n;;
 24: len 8; hex 3231303338343839; asc 21038489;;

Record lock, heap no 8 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745950000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a550a1f; asc A   U  ;;
 3: len 22; hex 524d3234303931333138313030373734333734393737; asc RM24091318100774374977;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234333031323838; asc 0324301288;;
 7: len 30; hex 472d434f4e2d342d482d322e35342d4c2d322e352d422d32353432e998b2; asc G-CON-4-H-2.54-L-2.5-B-2542   ; (total 36 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3032; asc N02;;
 15: len 4; hex 42303030; asc B000;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2292; asc   [" ;;
 22: len 8; hex 3232303235353839; asc 22025589;;
 23: len 5; hex 99b45b11e2; asc   [  ;;
 24: len 8; hex 3232303235353839; asc 22025589;;

Record lock, heap no 9 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745a06000; asc  u|GE ` ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 41000009860778; asc A     x;;
 3: len 22; hex 524d3234303931333138313030373537333735323139; asc RM24091318100757375219;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 11; hex 3033323432303433393642; asc 0324204396B;;
 7: len 30; hex 472d432d434150462d58322d3232342f3237353041434b2d4d4b5036322d; asc G-C-CAPF-X2-224/2750ACK-MKP62-; (total 33 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3031; asc N01;;
 15: len 4; hex 41303130; asc A010;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b228c; asc   [" ;;
 22: len 8; hex 3231303338343839; asc 21038489;;
 23: len 5; hex 99b45b0862; asc   [ b;;
 24: len 8; hex 3231303338343839; asc 21038489;;

Record lock, heap no 10 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745b08000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 41000009a5295a; asc A    )Z;;
 3: len 22; hex 524d3234303931333138313030373537333738393931; asc RM24091318100757378991;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234323034363938; asc 0324204698;;
 7: len 30; hex 472d434150452d3437302f3235304b2d423130352d352a31312d322e3554; asc G-CAPE-470/250K-B105-5*11-2.5T; (total 33 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3031; asc N01;;
 15: len 4; hex 41303130; asc A010;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b228d; asc   [" ;;
 22: len 8; hex 3231303338343839; asc 21038489;;
 23: len 5; hex 99b45b086e; asc   [ n;;
 24: len 8; hex 3231303338343839; asc 21038489;;

Record lock, heap no 12 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745c0d000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a25154b; asc A   % K;;
 3: len 22; hex 524d3234303931333138313030373733333739313730; asc RM24091318100773379170;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30333234343032383430; asc 0324402840;;
 7: len 30; hex 472d432d4252494447452d3830302d31352d443135534238302f4431354a; asc G-C-BRIDGE-800-15-D15SB80/D15J; (total 38 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3138; asc N18;;
 15: len 4; hex 48303130; asc H010;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2290; asc   [" ;;
 22: len 8; hex 3231303732363033; asc 21072603;;
 23: len 5; hex 99b45b1196; asc   [  ;;
 24: len 8; hex 3231303732363033; asc 21072603;;

Record lock, heap no 13 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757c4745d00000; asc  u|GE   ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a350dee; asc A   5  ;;
 3: len 22; hex 524d3234303931333138313030373734333732303732; asc RM24091318100774372072;;
 4: len 14; hex 5043323032343039313333313430; asc PC202409133140;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 11; hex 3033323435313032383041; asc 0324510280A;;
 7: len 30; hex 472de794b5e6849f2d434d2d3138322d3530312d31302a31322d35422d42; asc G-      -CM-182-501-10*12-5B-B; (total 35 bytes);
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000051400000000; asc                ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 32; asc 2;;
 14: len 3; hex 4e3132; asc N12;;
 15: len 4; hex 42303030; asc B000;;
 16: len 1; hex 30; asc 0;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b06c0; asc   [  ;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2291; asc   [" ;;
 22: SQL NULL;
 23: SQL NULL;
 24: SQL NULL;

Record lock, heap no 15 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757cf5a4ca6000; asc  u|   ` ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 410000098607b8; asc A      ;;
 3: len 22; hex 524d3234303931333138313030373537333735333637; asc RM24091318100757375367;;
 4: len 14; hex 5043323032343039313333313431; asc PC202409133141;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 10; hex 30303130363030333332; asc 0010600332;;
 7: len 27; hex 472d524f48532de89ebae9928928332a38e4b889e4bbb7e993ac29; asc G-ROHS-      (3*8         );;
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 80000000000000000186a000000000; asc                ;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 800000000000000000006400000000; asc           d    ;;
 12: len 2; hex 4541; asc EA;;
 13: len 1; hex 33; asc 3;;
 14: len 3; hex 443336; asc D36;;
 15: len 4; hex 48303130; asc H010;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b077a; asc   [ z;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b228c; asc   [" ;;
 22: len 8; hex 3230303036363635; asc 20006665;;
 23: len 5; hex 99b45b155b; asc   [ [;;
 24: len 8; hex 3230303036363635; asc 20006665;;

Record lock, heap no 16 PHYSICAL RECORD: n_fields 25; compact format; info bits 0
 0: len 8; hex 99757cf5a4e41000; asc  u|     ;;
 1: len 6; hex 000013ef48e6; asc     H ;;
 2: len 7; hex 4100000a3d1488; asc A   =  ;;
 3: len 22; hex 524d3234303931333138313030373734333732373733; asc RM24091318100774372773;;
 4: len 14; hex 5043323032343039313333313431; asc PC202409133141;;
 5: len 4; hex 38304b30; asc 80K0;;
 6: len 11; hex 3030314136353633323034; asc 001A6563204;;
 7: len 18; hex e58e8be6958fe883b6e5b8a62839392a3629; asc             (99*6);;
 8: len 10; hex 323032342d30392d3230; asc 2024-09-20;;
 9: len 15; hex 8000000000000000001bab01f78a40; asc               @;;
 10: len 15; hex 80000000000000000186a000000000; asc                ;;
 11: len 15; hex 8000000000000000000007007f26c8; asc              & ;;
 12: len 1; hex 4d; asc M;;
 13: len 1; hex 33; asc 3;;
 14: len 3; hex 443336; asc D36;;
 15: len 4; hex 44573030; asc DW00;;
 16: len 1; hex 31; asc 1;;
 17: len 1; hex 30; asc 0;;
 18: SQL NULL;
 19: len 5; hex 99b45b077a; asc   [ z;;
 20: len 8; hex 3230303034323031; asc 20004201;;
 21: len 5; hex 99b45b2291; asc   [" ;;
 22: len 8; hex 3230303036363635; asc 20006665;;
 23: len 5; hex 99b45b155b; asc   [ [;;
 24: len 8; hex 3230303036363635; asc 20006665;;
~~~







##### 死锁 SQL：

~~~sql
UPDATE oms_production_order_detail  set create_by =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  create_time =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  update_by =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  update_time =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,    del_flag =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,    product_order_code =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  material_code =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  material_desc =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  product_factory_code =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  bom_num =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  basic_num =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  raw_material_product_num =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  product_start_date =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  unit =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  bom_version =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  purchase_group =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  storage_point =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  status =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  confirm_time =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end,  confirm_by =case when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ?                         when id=? then ? end WHERE id IN  ( ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? )

~~~

